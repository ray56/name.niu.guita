<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="name.niu.guitar.ui.commands.GenOffline"
            name="Generate Test Case Offline">
      </command>
      <command
            id="name.niu.guitar.ui.commands.GenOnline"
            name="Generate Test Case Online">
         <commandParameter
               id="name.niu.guitar.ui.commands.GenOnline.subCmd"
               name="subCmd"
               optional="false">
         </commandParameter>
      </command>
	<command
		id="name.niu.guitar.ui.commands.EditSystemVariable"
		name="Edit System Variable">
	</command>
	<command
		id="name.niu.guitar.ui.commands.SelectAsFrom"
		name="Select As From">
	</command>
	<command
		id="name.niu.guitar.ui.commands.SelectAsTo"
		name="Select As To">
	</command>

     
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="name.niu.guitar.ui.guitarMainMenu"
               label="Guitar">
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  label="Generate Test Case Offline"
                  style="push">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="OFFLINE">
               </parameter>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  label="Generate Test Case Online"
                  style="push">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="START">
               </parameter>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.EditSystemVariable"
                  label="Edit System Variable"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="name.niu.guitar.ui.toolbars.GuitarMainToolBar"
               label="Guitar">
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/SelectFrom.png"
                  id="selectFrom"
                  label="SelectFrom"
                  style="push"
                  tooltip="Select a starting poin in a diagram/subdiagram">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="SELECTFROM">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/SelectTo.png"
                  id="SelectTo"
                  label="SelectTo"
                  style="push"
                  tooltip="Select a endding poin in a diagram/subdiagram">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="SELECTTO">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="sep1"
                  visible="true">
            </separator>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/OnlineStartGen2.png"
                  id="start"
                  label="Start StepMode"
                  style="push"
                  tooltip="Start gen and exe test case">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="TRIGGER_START_IN_STEP_MODE">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/OnlineStartGen.png"
                  id="start"
                  label="Start Continue Mode"
                  style="push"
                  tooltip="Start gen and exe test case">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="TRIGGER_START_IN_CONTINUOUS_MODE">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/ContinueExe.gif"
                  id="continue"
                  label="Continue"
                  style="push"
                  tooltip="Continue exe test case">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="TRIGGER_STEP">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <or>
                        <equals
                              value="RUNNING">
                        </equals>
                        <equals
                              value="RUNNING">
                        </equals>
                     </or>
                  </with>
               </visibleWhen>
            </command>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/StopExe.gif"
                  id="stop"
                  label="Stop"
                  style="push"
                  tooltip="Stop exe test case">
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="TRIGGER_STOP">
               </parameter>
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <or>
                        <equals
                              value="RUNNING">
                        </equals>
                        <equals
                              value="RUNNING">
                        </equals>
                     </or>
                  </with>
               </visibleWhen>
            </command>
            <separator
                  name="sep2"
                  visible="true">
            </separator>
            <command
                  commandId="name.niu.guitar.ui.commands.GenOnline"
                  icon="icons/StartGenAndExe.gif"
                  label="Offline"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
               <parameter
                     name="name.niu.guitar.ui.commands.GenOnline.subCmd"
                     value="OFFLINE">
               </parameter>
            </command>
            <separator
                  name="sep3"
                  visible="true">
            </separator>
            <command
                  commandId="name.niu.guitar.ui.commands.EditSystemVariable"
                  icon="icons/SystemVariable.png"
                  label="Edit Variable"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="name.niu.guitar.ui.sourceProviders.genAndExeStatus">
                     <equals
                           value="IDLE">
                     </equals>
                  </with>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="name.niu.guitar.ui.handlers.TCgenOfflineAction"
            commandId="name.niu.guitar.ui.commands.GenOffline">
      </handler>
      <handler
            class="name.niu.guitar.ui.handlers.TCgenOnlineAction"
            commandId="name.niu.guitar.ui.commands.GenOnline">
      </handler>
      <handler
            class="name.niu.guitar.ui.handlers.EditSystemVariableHandler"
            commandId="name.niu.guitar.ui.commands.EditSystemVariable">
      </handler>
   </extension>

   <extension
         id="ProductGuitar"
         point="org.eclipse.core.runtime.products">
      <product
            application="org.eclipse.ui.ide.workbench"
            name="Guitar Application">
         <property
               name="appName"
               value="Guitar Application">
         </property>
         <property
               name="aboutImage"
               value="icons/product/about.gif">
         </property>
         <property
               name="aboutText"
               value="Guitar Application for  GUI Test Automating">
         </property>
         <property
               name="windowImages"
               value="icons/product/window128.png">
         </property>
         <property
               name="startupForegroundColor"
               value="400080">
         </property>
         <property
               name="startupMessageRect"
               value="80,145,200,20">
         </property>
         <property
               name="startupProgressRect"
               value="0,165,280,15">
         </property>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini">
         </property>
      </product>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="name.niu.guitar.ui.wizards.guitarCategroy"
            name="Guitar">
      </category>
      <wizard
            category="name.niu.guitar.ui.wizards.guitarCategroy"
            class="name.niu.guitar.ui.wizards.NewGuitarProjectWizard"
            icon="icons/guitar-plus-16.png"
            id="name.niu.guitar.ui.wizards.NewGuitarProject"
            name="New Guitar Project"
            project="true">
         <description>
            Create a Guita Project...
         </description>
      </wizard>
         
      
  	  <wizard
  	     name="New UISUT Diagram"
  	     icon="icons/obj16/uisutDiagramFile.gif"
  	     category="name.niu.guitar.ui.wizards.guitarCategroy"
  	     class="name.niu.guitar.ui.wizards.UISUTCreationWizard"
  	     id="name.niu.guita.ui.wizards.NewUISUTDiagramWizardID">
  	  	 <description>%newWizardDesc</description>  
      </wizard>

   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="name.niu.guitar.ui.sourceProviders.CommandState">
         <variable
               name="name.niu.guitar.ui.sourceProviders.genAndExeStatus"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="name.niu.guitar.ui.preferencePages.GuitarPreferencePage"
            id="name.niu.guitar.ui.preferencePages.GuitarPreferencePage"
            name="Guitar Preferences">
      </page>
      <page
            category="name.niu.guitar.ui.preferencePages.GuitarPreferencePage"
            class="name.niu.guitar.ui.preferencePages.GuitarGenPreferencePage"
            id="name.niu.guitar.ui.preferencePages.GuitarGen"
            name="Config Guitar Gen">
      </page>
      <page
            category="name.niu.guitar.ui.preferencePages.GuitarPreferencePage"
            class="name.niu.guitar.ui.preferencePages.GuitarScriptPreferencePage"
            id="name.niu.guitar.ui.preferencePages.GuitarScript"
            name="Config Script Engine">
      </page>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="name.niu.guitar.preference.GuitarPreferenceInitializer">
      </initializer>
   </extension>

</plugin>
